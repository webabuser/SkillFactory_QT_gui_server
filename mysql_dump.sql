-- phpMyAdmin SQL Dump
-- version 4.6.6deb5ubuntu0.5
-- https://www.phpmyadmin.net/
--
-- Хост: localhost:3306
-- Время создания: Янв 28 2026 г., 00:24
-- Версия сервера: 5.7.42-0ubuntu0.18.04.1
-- Версия PHP: 7.2.24-0ubuntu0.18.04.17

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- База данных: `chat`
--

-- --------------------------------------------------------

--
-- Структура таблицы `hashes`
--

CREATE TABLE `hashes` (
  `id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `hash` char(40) COLLATE utf8_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Хэши юзеров';

--
-- Дамп данных таблицы `hashes`
--

INSERT INTO `hashes` (`id`, `user_id`, `hash`) VALUES
(1, 1, '8665cb61965f9b5fa5accead42dd0ef47a3ef533'),
(2, 2, '537d1689cc0b7d4c0c9753c63d5408eff6012ad6'),
(3, 3, 'b09bfed5772dd42ee3bdee5872065fc8875b5de5'),
(4, 4, 'e77c9961d5aaaa637976abae9cdd01c6a45ce5a6'),
(5, 5, 'ea3e7be47506f506ac3804eefc9eddf4a81c48da'),
(6, 6, '9956b4fd7678e953540aa81ca0aa301e3119597e'),
(7, 7, '0d28f8c257d00cec04e6375362b4890ee80586ac'),
(8, 8, '179d3e956413b03d79c3e8959d90c648acbb7e84'),
(9, 9, '3ad523c1d84e1c6d69adb23b01ff653f1915c8b7'),
(10, 10, '1c353c54fc61fd635dc2316271ea6783f9e32e20'),
(11, 11, 'dab86ce6dfceb29867dcea31a1233eb5431b37df'),
(12, 12, 'bde73c7042b0b872db64705322c95ac028d6f5f9'),
(13, 13, '78b69a81bd4492466931fc819ab36d52fc1eba60'),
(14, 14, '5b17d82e19156f15ae543c212a0ffacd9a785bbf'),
(15, 15, 'b17f5817e72acd66a4676a52dec46ab8bc3222cd'),
(16, 16, 'fd2b9b322ce1c4804af447346aab30712d01226e'),
(17, 17, 'fc2b9f1a81f4508a4df2d95451a2a77e0524ca0e'),
(18, 18, 'bb41770d23237a16afbf8932da7248636bc91946'),
(19, 19, '2c48e4f1ed225b746d974e689643ab7a4f2e71b6'),
(20, 20, 'a933517bbbca5cf821a0b380dfda8ec5b1a03f53');

-- --------------------------------------------------------

--
-- Структура таблицы `messages`
--

CREATE TABLE `messages` (
  `id` int(11) NOT NULL,
  `sender_id` int(11) NOT NULL,
  `receiver_id` int(11) NOT NULL,
  `text` text COLLATE utf8_unicode_ci,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` set('sent','read','unread','deleted','received') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'unread'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Таблица комментариев';

--
-- Дамп данных таблицы `messages`
--

INSERT INTO `messages` (`id`, `sender_id`, `receiver_id`, `text`, `created`, `status`) VALUES
(1, 1, 2, 'Привет, Джейн! Как дела?', '2026-01-27 20:16:08', 'read'),
(2, 1, 3, 'Алекс, ты видел новый проект?', '2026-01-27 20:16:08', 'sent'),
(3, 1, 4, 'Мария, встреча в 15:00', '2026-01-27 20:16:08', 'read'),
(4, 1, 5, 'Роберт, документы готовы?', '2026-01-27 20:16:08', 'unread'),
(5, 1, 6, 'София, спасибо за помощь!', '2026-01-27 20:16:08', 'read'),
(6, 1, 7, 'Майкл, позвони мне', '2026-01-27 20:16:08', 'received'),
(7, 1, 8, 'Эмили, ужин в 19:00', '2026-01-27 20:16:08', 'read'),
(8, 1, 9, 'Дэвид, проверь почту', '2026-01-27 20:16:08', 'sent'),
(9, 1, 10, 'Оливия, фильм сегодня?', '2026-01-27 20:16:08', 'unread'),
(10, 1, 11, 'Вильям, встреча перенесена', '2026-01-27 20:16:08', 'read'),
(11, 1, 12, 'Ава, как прошла презентация?', '2026-01-27 20:16:08', 'received'),
(12, 1, 13, 'Джеймс, нужна твоя помощь', '2026-01-27 20:16:08', 'read'),
(13, 1, 14, 'Хлоя, ответь на письмо', '2026-01-27 20:16:08', 'sent'),
(14, 1, 15, 'Бенджамин, проект утвердили', '2026-01-27 20:16:08', 'read'),
(15, 1, 16, 'Лили, завтра в офис', '2026-01-27 20:16:08', 'unread'),
(16, 1, 17, 'Самуэль, документы подписаны', '2026-01-27 20:16:08', 'read'),
(17, 1, 18, 'Элла, спасибо за подарок!', '2026-01-27 20:16:08', 'received'),
(18, 1, 19, 'Генри, кофе в 11:00?', '2026-01-27 20:16:08', 'read'),
(19, 1, 20, 'Грейс, готов отчет', '2026-01-27 20:16:08', 'sent'),
(20, 1, 2, 'Джейн, забыл спросить...', '2026-01-27 20:16:08', 'unread'),
(21, 2, 1, 'Привет, Джон! Все отлично', '2026-01-27 20:16:08', 'read'),
(22, 2, 3, 'Алекс, завтра дедлайн', '2026-01-27 20:16:08', 'sent'),
(23, 2, 4, 'Мария, пришли файлы', '2026-01-27 20:16:08', 'read'),
(24, 2, 5, 'Роберт, когда встреча?', '2026-01-27 20:16:08', 'unread'),
(25, 2, 6, 'София, отличная работа!', '2026-01-27 20:16:08', 'read'),
(26, 2, 7, 'Майкл, проверь расчеты', '2026-01-27 20:16:08', 'received'),
(27, 2, 8, 'Эмили, кофебрейк?', '2026-01-27 20:16:08', 'read'),
(28, 2, 9, 'Дэвид, клиент ждет', '2026-01-27 20:16:08', 'sent'),
(29, 2, 10, 'Оливия, заказ подтвержден', '2026-01-27 20:16:08', 'unread'),
(30, 2, 11, 'Вильям, срочный звонок', '2026-01-27 20:16:08', 'read'),
(31, 2, 12, 'Ава, презентация прошла отлично!', '2026-01-27 20:16:08', 'received'),
(32, 2, 13, 'Джеймс, бюджет утвердили', '2026-01-27 20:16:08', 'read'),
(33, 2, 14, 'Хлоя, встретимся завтра', '2026-01-27 20:16:08', 'sent'),
(34, 2, 15, 'Бенджамин, документы готовы', '2026-01-27 20:16:08', 'read'),
(35, 2, 16, 'Лили, перенеси встречу', '2026-01-27 20:16:08', 'unread'),
(36, 2, 17, 'Самуэль, ответь клиенту', '2026-01-27 20:16:08', 'read'),
(37, 2, 18, 'Элла, когда вернешься?', '2026-01-27 20:16:08', 'received'),
(38, 2, 19, 'Генри, заказ отменен', '2026-01-27 20:16:08', 'read'),
(39, 2, 20, 'Грейс, проверь скрипт', '2026-01-27 20:16:08', 'sent'),
(40, 2, 1, 'Джон, забыла сказать...', '2026-01-27 20:16:08', 'unread'),
(41, 3, 1, 'Джон, видел проект, отлично!', '2026-01-27 20:16:08', 'read'),
(42, 3, 2, 'Джейн, дедлайн успею', '2026-01-27 20:16:08', 'sent'),
(43, 3, 4, 'Мария, нужна твоя экспертиза', '2026-01-27 20:16:08', 'read'),
(44, 3, 5, 'Роберт, код готов к ревью', '2026-01-27 20:16:08', 'unread'),
(45, 3, 6, 'София, баг пофиксил', '2026-01-27 20:16:08', 'read'),
(46, 3, 7, 'Майкл, архитектура готова', '2026-01-27 20:16:08', 'received'),
(47, 3, 8, 'Эмили, дизайн утвердили', '2026-01-27 20:16:08', 'read'),
(48, 3, 9, 'Дэвид, тесты пройдены', '2026-01-27 20:16:08', 'sent'),
(49, 3, 10, 'Оливия, API документировано', '2026-01-27 20:16:08', 'unread'),
(50, 3, 11, 'Вильям, производительность улучшена', '2026-01-27 20:16:08', 'read'),
(51, 3, 12, 'Ава, фича реализована', '2026-01-27 20:16:08', 'received'),
(52, 3, 13, 'Джеймс, релиз завтра', '2026-01-27 20:16:08', 'read'),
(53, 3, 14, 'Хлоя, код в репозитории', '2026-01-27 20:16:08', 'sent'),
(54, 3, 15, 'Бенджамин, документация готова', '2026-01-27 20:16:08', 'read'),
(55, 3, 16, 'Лили, рефакторинг завершен', '2026-01-27 20:16:08', 'unread'),
(56, 3, 17, 'Самуэль, билд успешен', '2026-01-27 20:16:08', 'read'),
(57, 3, 18, 'Элла, новая библиотека', '2026-01-27 20:16:08', 'received'),
(58, 3, 19, 'Генри, оптимизация работает', '2026-01-27 20:16:08', 'read'),
(59, 3, 20, 'Грейс, миграция базы', '2026-01-27 20:16:08', 'sent'),
(60, 3, 1, 'Джон, еще один вопрос...', '2026-01-27 20:16:08', 'unread'),
(61, 4, 1, 'Джон, на встрече буду', '2026-01-27 20:16:08', 'read'),
(62, 4, 2, 'Джейн, файлы отправила', '2026-01-27 20:16:08', 'sent'),
(63, 4, 3, 'Алекс, экспертиза в процессе', '2026-01-27 20:16:08', 'read'),
(64, 4, 5, 'Роберт, анализ готов', '2026-01-27 20:16:08', 'unread'),
(65, 4, 6, 'София, данные проверены', '2026-01-27 20:16:08', 'read'),
(66, 4, 7, 'Майкл, статистика готова', '2026-01-27 20:16:08', 'received'),
(67, 4, 8, 'Эмили, отчет составлен', '2026-01-27 20:16:08', 'read'),
(68, 4, 9, 'Дэвид, графики построены', '2026-01-27 20:16:08', 'sent'),
(69, 4, 10, 'Оливия, выборка данных', '2026-01-27 20:16:08', 'unread'),
(70, 4, 11, 'Вильям, тренды выявлены', '2026-01-27 20:16:08', 'read'),
(71, 4, 12, 'Ава, выводы в презентации', '2026-01-27 20:16:08', 'received'),
(72, 4, 13, 'Джеймс, метрики улучшились', '2026-01-27 20:16:08', 'read'),
(73, 4, 14, 'Хлоя, гипотеза подтвердилась', '2026-01-27 20:16:08', 'sent'),
(74, 4, 15, 'Бенджамин, исследование завершено', '2026-01-27 20:16:08', 'read'),
(75, 4, 16, 'Лили, корреляция найдена', '2026-01-27 20:16:08', 'unread'),
(76, 4, 17, 'Самуэль, аномалии обнаружены', '2026-01-27 20:16:08', 'read'),
(77, 4, 18, 'Элла, модель обучена', '2026-01-27 20:16:08', 'received'),
(78, 4, 19, 'Генри, точность 95%', '2026-01-27 20:16:08', 'read'),
(79, 4, 20, 'Грейс, алгоритм работает', '2026-01-27 20:16:08', 'sent'),
(80, 4, 1, 'Джон, дополнительная информация...', '2026-01-27 20:16:08', 'unread'),
(81, 5, 1, 'Джон, документы почти готовы', '2026-01-27 20:16:08', 'read'),
(82, 5, 2, 'Джейн, встреча в среду', '2026-01-27 20:16:08', 'sent'),
(83, 5, 3, 'Алекс, ревью завтра', '2026-01-27 20:16:08', 'read'),
(84, 5, 4, 'Мария, анализ принят', '2026-01-27 20:16:08', 'unread'),
(85, 5, 6, 'София, контракт подписан', '2026-01-27 20:16:08', 'read'),
(86, 5, 7, 'Майкл, переговоры успешны', '2026-01-27 20:16:08', 'received'),
(87, 5, 8, 'Эмили, партнер согласен', '2026-01-27 20:16:08', 'read'),
(88, 5, 9, 'Дэвид, сделка закрыта', '2026-01-27 20:16:08', 'sent'),
(89, 5, 10, 'Оливия, инвестиции получены', '2026-01-27 20:16:08', 'unread'),
(90, 5, 11, 'Вильям, бюджет увеличен', '2026-01-27 20:16:08', 'read'),
(91, 5, 12, 'Ава, проект финансируется', '2026-01-27 20:16:08', 'received'),
(92, 5, 13, 'Джеймс, ROI высокий', '2026-01-27 20:16:08', 'read'),
(93, 5, 14, 'Хлоя, прибыль растет', '2026-01-27 20:16:08', 'sent'),
(94, 5, 15, 'Бенджамин, рынок расширяется', '2026-01-27 20:16:08', 'read'),
(95, 5, 16, 'Лили, конкуренты отстают', '2026-01-27 20:16:08', 'unread'),
(96, 6, 1, 'Джон, всегда рада помочь!', '2026-01-27 20:16:08', 'read'),
(97, 6, 2, 'Джейн, команда молодец!', '2026-01-27 20:16:08', 'sent'),
(98, 6, 3, 'Алекс, баг критический?', '2026-01-27 20:16:08', 'read'),
(99, 6, 4, 'Мария, данные точные', '2026-01-27 20:16:08', 'unread'),
(100, 6, 5, 'Роберт, контракт выгодный', '2026-01-27 20:16:08', 'read'),
(101, 6, 7, 'Майкл, стратегия работает', '2026-01-27 20:16:08', 'received'),
(102, 6, 8, 'Эмили, дизайн интуитивный', '2026-01-27 20:16:08', 'read'),
(103, 6, 9, 'Дэвид, интерфейс удобный', '2026-01-27 20:16:08', 'sent'),
(104, 6, 10, 'Оливия, UX улучшен', '2026-01-27 20:16:08', 'unread'),
(105, 6, 11, 'Вильям, отзывы позитивные', '2026-01-27 20:16:08', 'read'),
(106, 7, 8, 'Срочно! Проверь почту', '2026-01-27 20:16:08', 'read'),
(107, 8, 9, 'Важное обновление', '2026-01-27 20:16:08', 'sent'),
(108, 9, 10, 'Совещание отменяется', '2026-01-27 20:16:08', 'unread'),
(109, 10, 11, 'Новый проект стартует', '2026-01-27 20:16:08', 'read'),
(110, 11, 12, 'Дедлайн сдвинут', '2026-01-27 20:16:08', 'received'),
(111, 12, 13, 'Бонусы утверждены', '2026-01-27 20:16:08', 'read'),
(112, 13, 14, 'Отпуск согласован', '2026-01-27 20:16:08', 'sent'),
(113, 14, 15, 'Командировка завтра', '2026-01-27 20:16:08', 'unread'),
(114, 15, 16, 'Премия начислена', '2026-01-27 20:16:08', 'read'),
(115, 16, 17, 'Оборудование прибыло', '2026-01-27 20:16:08', 'received'),
(116, 17, 18, 'Софт обновлен', '2026-01-27 20:16:08', 'read'),
(117, 18, 19, 'Сервер перезагружен', '2026-01-27 20:16:08', 'sent'),
(118, 19, 20, 'Резервная копия готова', '2026-01-27 20:16:08', 'unread'),
(119, 20, 1, 'Система работает стабильно', '2026-01-27 20:16:08', 'read'),
(120, 7, 3, 'Архитектура пересмотрена', '2026-01-27 20:16:08', 'sent'),
(121, 8, 5, 'Клиент доволен', '2026-01-27 20:16:08', 'unread'),
(122, 9, 7, 'Качество улучшилось', '2026-01-27 20:16:08', 'read'),
(123, 10, 9, 'Эффективность выросла', '2026-01-27 20:16:08', 'received'),
(124, 11, 12, 'Инновация внедрена', '2026-01-27 20:16:08', 'read'),
(125, 12, 14, 'Технология освоена', '2026-01-27 20:16:08', 'sent'),
(126, 13, 16, 'Процесс оптимизирован', '2026-01-27 20:16:08', 'unread'),
(127, 14, 18, 'Ресурсы выделены', '2026-01-27 20:16:08', 'read'),
(128, 15, 20, 'Цель достигнута', '2026-01-27 20:16:08', 'received');

-- --------------------------------------------------------

--
-- Структура таблицы `users`
--

CREATE TABLE `users` (
  `id` int(11) NOT NULL,
  `login` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `surname` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `email` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` enum('active','blocked','deleted') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'active',
  `blocked_at` timestamp NULL DEFAULT NULL,
  `block_reason` text COLLATE utf8_unicode_ci
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Дамп данных таблицы `users`
--

INSERT INTO `users` (`id`, `login`, `name`, `surname`, `email`, `created`, `status`, `blocked_at`, `block_reason`) VALUES
(1, 'john_doe', 'John', 'Doe', 'john.doe@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(2, 'jane_smith', 'Jane', 'Smith', 'jane.smith@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(3, 'alex_wong', 'Alex', 'Wong', 'alex.wong@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(4, 'maria_garcia', 'Maria', 'Garcia', 'maria.garcia@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(5, 'robert_chen', 'Robert', 'Chen', 'robert.chen@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(6, 'sophia_kim', 'Sophia', 'Kim', 'sophia.kim@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(7, 'michael_brown', 'Michael', 'Brown', 'michael.brown@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(8, 'emily_davis', 'Emily', 'Davis', 'emily.davis@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(9, 'david_miller', 'David', 'Miller', 'david.miller@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(10, 'olivia_wilson', 'Olivia', 'Wilson', 'olivia.wilson@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(11, 'william_taylor', 'William', 'Taylor', 'william.taylor@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(12, 'ava_thomas', 'Ava', 'Thomas', 'ava.thomas@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(13, 'james_moore', 'James', 'Moore', 'james.moore@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(14, 'chloe_anderson', 'Chloe', 'Anderson', 'chloe.anderson@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(15, 'benjamin_jackson', 'Benjamin', 'Jackson', 'benjamin.jackson@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(16, 'lily_white', 'Lily', 'White', 'lily.white@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(17, 'samuel_harris', 'Samuel', 'Harris', 'samuel.harris@example.com', '2026-01-27 20:16:08', 'active', NULL, NULL),
(18, 'ella_martin', 'Ella', 'Martin', 'ella.martin@example.com', '2026-01-27 20:16:08', 'deleted', '2026-01-27 20:17:16', 'Deleting user via GUI'),
(19, 'henry_thompson', 'Henry', 'Thompson', 'henry.thompson@example.com', '2026-01-27 20:16:08', 'blocked', '2026-01-27 20:17:09', 'Blocking user via GUI'),
(20, 'grace_lee', 'Grace', 'Lee', 'grace.lee@example.com', '2026-01-27 20:16:08', 'blocked', '2026-01-27 20:17:04', 'Blocking user via GUI');

--
-- Триггеры `users`
--
DELIMITER $$
CREATE TRIGGER `user_id_to_hash` AFTER INSERT ON `users` FOR EACH ROW INSERT INTO hashes (user_id, hash) VALUES (NEW.id, NULL)
$$
DELIMITER ;

--
-- Индексы сохранённых таблиц
--

--
-- Индексы таблицы `hashes`
--
ALTER TABLE `hashes`
  ADD PRIMARY KEY (`id`),
  ADD KEY `user_id` (`user_id`);

--
-- Индексы таблицы `messages`
--
ALTER TABLE `messages`
  ADD PRIMARY KEY (`id`),
  ADD KEY `sender_id` (`sender_id`),
  ADD KEY `receiver_id` (`receiver_id`);

--
-- Индексы таблицы `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `login` (`login`),
  ADD UNIQUE KEY `email` (`email`),
  ADD KEY `status_index` (`status`);

--
-- AUTO_INCREMENT для сохранённых таблиц
--

--
-- AUTO_INCREMENT для таблицы `hashes`
--
ALTER TABLE `hashes`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=21;
--
-- AUTO_INCREMENT для таблицы `messages`
--
ALTER TABLE `messages`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=129;
--
-- AUTO_INCREMENT для таблицы `users`
--
ALTER TABLE `users`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=21;
--
-- Ограничения внешнего ключа сохраненных таблиц
--

--
-- Ограничения внешнего ключа таблицы `hashes`
--
ALTER TABLE `hashes`
  ADD CONSTRAINT `hashes_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
